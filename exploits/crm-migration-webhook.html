<html>
    <head>
        <title>Migrating a customer journey flawlessly</title>
        <link rel="stylesheet" href="/styles.css">
    </head>
    <body>
        <div class="page-center-text">
            <h1>Migrating a customer journey flawlessly</h1>
            <h2>Context</h2>
            <p>
                Our client had been using ActiveCampaign since they started their supplement business, they had several customer journeys implemented for different kinds of customers and products. 
                Unfortunately, the customer journeys became so long that they needed a new CRM capable of running these journeys.
            </p>
            <p>
                We needed a method to migrate customers from ActiveCampaign to the new CRM without causing any issues, bearing in mind, some of these journeys lasted up to a year.
                Each customer was up to a different point in the journey, adding to the complexity of the migration.
            </p>
            <p>
                Adding to that, we were under time constraints, since the old CRM was still being populated with data from the website during the new CRM being built, meaning the old CRM was dangerously close to its account limits.
                See how <a href="/exploits/client-crm-overflow.html">I bought us more time</a>.
            </p>
            <br>
            <h2>Solution</h2>
            <p>
                We needed a script that would not only transfer contacts from one CRM to another at the right stages, but also make sure the transition was seamless.
                There was no room for error, a contact couldn't be receiving two sets of the same emails and being overwhelmed to the point of marking our client's emails as spam.
            </p>
            <p>
                I noticed that the way the new customer journey was constructed, every month was separated into a different automation, as opposed to ActiveCampaign where every month was one in one giant automation.
                This meant I would have to put people into the relevant month automation, and take them out of the big automation.
            </p>
            <p>
                I began by reviewing the API of the new CRM and realised there was a function for putting contacts in automations which would be useful for this case.
                The issue after that came after wondering how I would transfer users over to the correct automations from their current positions in ActiveCampaign.
            </p>
            <p>
                Thankfully, the way the ActiveCampaign automation kept track of which month the customers were in was via a tag, which could be accessed from other automations easily.
            </p>
            <p>
                I decided how I was going to use the script via webhook, here's an overview of what happened :
                <ol>
                    <li>
                        ActiveCampaign sends a webhook to a PHP script, this URL has a GET parameter on the end, indicating what month the contact is on.
                    </li>
                    <li>
                        The script receives the webhook and saves a variable containing the contact information needed for the migration.
                    </li>
                    <li>
                        The script reads the URL parameter, and translates the month number to what automation the contact needs to go to in the new CRM.
                    </li>
                    <li>
                        The script sends an API call to the new CRM to tell it to load the customer into the new CRM.
                    </li>
                </ol>
            </p>
            <p>
                But ActiveCampaign also needed a system in place to call the webhooks and make sure everything was wrapped up nicely before the contact continued onto the new CRM.
                I built a new automation that would do the following :
                <ol>
                    <li>
                        When a migration tag is added to a contact, they go into this migration automation.
                    </li>
                    <li>
                        The migration automation checks the contact record for tags to detect where the contact is in the customer journey. 
                    </li>
                    <li>
                        It sends a webhook based on what month that contact is in, for example; if the contact is in month 11, it will send the webhook to <code>http://example.com/script.php?month=11</code>.
                    </li>
                    <li>
                        It removes the contact from the old CRM automations to prevent them getting any duplicate emails and confusing them.
                    </li>
                </ol>
            </p>
            <br>
            <h2>Conclusion</h2>
            <p>
                This script worked well, managing to transfer over 90% of customers across without issue, only limited by the old CRM account expiring and having no more time to migrate more customers over.
            </p>
            <p>
                This was a high-stakes operation with not a huge amount of notice for something of this scale, there were thousands of customers, the vast majority bringing in over Â£200 of revenue per month.
                A missed chance to not explain a benefit to a customer, or prompt them to repurchase, could have resulted in thousands of pounds in lost revenue.
            </p>
        </div>
    </body>
</html>